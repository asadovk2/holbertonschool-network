#!/usr/bin/env bash
# This script updates /etc/hosts so that localhost resolves to 127.0.0.2
# and facebook.com resolves to 8.8.8.8

set -euo pipefail

# Backup current /etc/hosts
sudo cp /etc/hosts /etc/hosts.bak

# Create a new /etc/hosts safely
{
    # Keep all lines except ones with 'localhost' or 'facebook.com'
    grep -vE '(^127\.0\.0\.1\s+localhost|facebook\.com)' /etc/hosts
    # Add the new entries
    echo "127.0.0.2 localhost"
    echo "8.8.8.8 facebook.com"
} | sudo tee /etc/hosts > /dev/null
